version: '2'
services:

  dev:
    build:
      context: ./
      args:
        http_proxy:
    image: muccg/${CCG_PROJECT}:${GIT_BRANCH}

  prod:
    extends:
      file: docker-compose-build.yml
      service: dev
    image: muccg/${CCG_PROJECT}:${GIT_TAG}

  prod-date:
    extends:
      file: docker-compose-build.yml
      service: dev
    image: muccg/${CCG_PROJECT}:${CCG_PATH_TAG}-${CCG_BUILD_DATE}

  latest:
    extends:
      file: docker-compose-build.yml
      service: dev
    image: muccg/${CCG_PROJECT}:latest

  latest-date:
    extends:
      file: docker-compose-build.yml
      service: dev
    image: muccg/${CCG_PROJECT}:latest-${CCG_BUILD_DATE}
